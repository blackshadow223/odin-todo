(()=>{"use strict";var e={208:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(601),a=n.n(o),r=n(314),s=n.n(r)()(a());s.push([e.id,'*,\n*::before,\n*::after {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\n:root {\n    line-height: 1.5rem;\n}\n\nhtml,\nbody {\n    height: 100%;\n}\n\nbody {\n    font-family: Arial, Helvetica, sans-serif;\n}\n\nbutton {\n    color: inherit;\n    background-color: inherit;\n    font-size: inherit;\n    border: 1px solid black;\n    padding: 4px 8px;\n    cursor: pointer;\n    outline: none;\n}\n\n\n.container {\n    display: grid;\n    grid-template-rows: 80px 3fr;\n    grid-template-columns: clamp(150px, 33%, 300px) 1fr;\n    grid-template-areas: \n        "header header"\n        "sidebar main";\n    height: 100%;\n    transition: .3s grid-template-columns ease-in-out;\n}\n\n.container.sidebar-hidden {\n    grid-template-columns: 0px 1fr;\n}\n\n\n.header {\n    grid-area: header;\n\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 0px 16px;\n\n    background-color: rgb(245, 245, 245);\n}\n\n.header-separator {\n    display: flex;\n    align-items: center;\n    gap: 16px;\n}\n\n.hamburger {\n    color: inherit;\n    background-color: inherit;\n    padding: 4px 12px;\n    border: 1px solid black;\n    cursor: pointer;\n    transition: .1s background-color ease;\n}\n\n.hamburger:hover {\n    color: white;\n    background-color: black;\n}\n\n.header-add-button {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: white;\n    background-color: black;\n    font-size: 1.25rem;\n    padding: 6px 16px 6px 0px;\n    border: 1px solid black;\n    cursor: pointer;\n    transition: .1s background-color ease;\n}\n\n.header-add-button > span {\n    padding: 0px 8px;\n}\n\n.header-add-button:hover {\n    color: black;\n    background-color: white;\n}\n\n\n.sidebar,\n.side,\n.nav {\n    display: flex;\n    flex-direction: column;\n}\n\n.sidebar {\n    grid-area: sidebar;\n    gap: 32px;\n    background-color: rgb(245, 245, 245);\n    padding: 0px 16px;\n    transition: .2s visibility ease-in-out;\n}\n\n.sidebar.hidden {\n    visibility: hidden;\n}\n\n.side {\n    gap: 16px;\n}\n\n.side > h2 {\n    line-height: 2.5rem;\n    border-bottom: 2px solid black;\n    user-select: none;\n}\n\n.nav {\n    list-style: none;\n}\n\n.nav-link {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    padding: 4px 8px;\n    transition: .1s background-color ease-in-out;\n    cursor: pointer;\n    user-select: none;\n}\n\n.nav-link.active {\n    background-color: rgb(200, 200, 200);\n}\n\n.nav-link:hover {\n    background-color: lightgrey;\n}\n\n\n.nav-buttons-group {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n\n.nav-delete {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 2rem;\n    height: 2rem;\n    color: red;\n    background-color: inherit;\n    font-size: 1.5rem;\n    border: 1px solid transparent;\n    border-radius: 50%;\n    cursor: pointer;\n}\n\n.nav-delete:active {\n    transform: translateY(2px);\n}\n\n.nav-delete:hover {\n    background-color: rgb(170, 170, 170);\n}\n\n.nav-edit {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 2rem;\n    height: 2rem;\n    color: blue;\n    font-size: 1.5rem;\n    border: 1px solid transparent;\n    border-radius: 50%;\n}\n\n.nav-edit:active {\n    transform: translateY(2px);\n}\n\n.nav-edit:hover {\n    background-color: rgb(170, 170, 170);\n}\n\n\n.add-project-button {\n    color: inherit;\n    background-color: rgb(225, 225, 225);\n    font-size: 1.5rem;\n    border: none;\n    padding: 4px 8px;\n    cursor: pointer;\n    transition: .1s background-color ease;\n}\n\n.add-project-button:hover {\n    background-color: lightgrey;\n}\n\n.add-project-input {\n    font-size: 1rem;\n    padding: 4px 8px;\n}\n\n\n.main {\n    grid-area: main;\n\n    background-color: rgb(245, 245, 245);\n    padding: 24px;\n}\n\n.todo-container {\n    display: flex;\n    flex-direction: column;\n    gap: 32px;\n}\n\n.todo {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 8px;\n    border: 2px solid transparent;\n    user-select: none;\n    cursor: pointer;\n}\n\n.todo:hover {\n    background-color: rgb(225, 225, 225);\n}\n\n.todo.low {\n    border-color: black;\n}\n\n.todo.medium {\n    border-color: orange;\n}\n\n.todo.high {\n    border-color: red;\n}\n\n.todo-head {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.check {\n    font-size: 1.5rem;\n    user-select: none;\n    cursor: pointer;\n}\n\n.check:active {\n    transform: translateY(2px);\n}\n\n.todo-tail {\n    display: flex;\n    align-items: center;\n    gap: 16px;\n}\n\n.todo-date {\n    font-size: .8rem;\n    border: 1px solid black;\n    padding: 0px 4px;\n    border-radius: 16px;\n}\n\n.todo-edit {\n    color: blue;\n    border: none;\n}\n\n.todo-edit:hover {\n    color: rgb(0, 100, 255);\n    transform: translateY(2px);\n}\n\n.todo-delete {\n    color: red;\n    border: none;\n}\n\n.todo-delete:hover {\n    color: rgb(255, 100, 0);\n    transform: translateY(2px);\n}\n\n\n\n\n.dialog {\n    display: flex;\n    flex-direction: column;\n    gap: 32px;\n\n    width: 50vw;\n    top: 0%;\n\n    background-color: rgb(225, 225, 225);\n    margin: auto;\n    padding: 16px;\n    border: none;\n\n    z-index: 1000;\n    opacity: 0;\n    transition: .3s opacity ease, .3s top ease;\n\n    outline: none;\n}\n\n.dialog::backdrop {\n    background-color: rgba(0, 0, 0, .8);\n\n    /* Animation/Transition Effect  */\n    opacity: var(--backdrop-opacity, 0);\n    transition: .3s opacity ease;\n}\n\n.dialog-close-button {\n    position: absolute;\n    top: 0;\n    right: 0;\n    border: none;\n    border-left: 1px solid red;\n    border-bottom: 1px solid red;\n    padding: 4px 24px;\n    font-size: 1.25rem;\n}\n\n.dialog-close-button:hover {\n    color: white;\n    background-color: red;\n}\n\n.dialog-content {\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n}\n\n.dialog-content-heading {\n    border-bottom: 2px solid black;\n}\n\n.dialog-buttons {\n    display: flex;\n    justify-content: flex-end;\n    gap: 8px;\n    padding: 0px 16px;\n}\n\n.dialog-cancel-button {\n    padding: 8px 16px;\n    border-radius: 4px;\n    transition: .1s background-color ease;\n}\n\n.dialog-cancel-button:active {\n    transform: translateY(2px);\n}\n\n.dialog-ok-button {\n    color: white;\n    background-color: black;\n    padding: 8px 16px;\n    border-radius: 4px;\n    transition: .1s background-color ease;\n}\n\n.dialog-ok-button:active {\n    transform: translateY(2px);\n}\n\n.todo-form-container {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 16px;\n    padding: 16px;\n}\n\n.todo-form-field {\n    display: flex;\n    flex-direction: column;\n}\n\n.todo-form-field > input,\n.todo-form-field > select,\n.todo-form-field > textarea {\n    width: 16rem;\n    height: 1.75rem;\n    font-size: 1.125rem;\n    border: none;\n    padding: 8px;\n}\n\n.todo-form-field > select {\n    padding: 4px;\n}\n\n.todo-form-field > textarea {\n    width: 16rem;\n    height: 5rem;\n}\n\n\n.reset-button {\n    position: absolute;\n    right: 0;\n    bottom: 0;\n}\n\n.reset-button:hover {\n    color: white;\n    background-color: black;\n}\n',""]);const i=s},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,a,r){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(o)for(var i=0;i<this.length;i++){var d=this[i][0];null!=d&&(s[d]=!0)}for(var c=0;c<e.length;c++){var l=[].concat(e[c]);o&&s[l[0]]||(void 0!==r&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=r),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),a&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=a):l[4]="".concat(a)),t.push(l))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var r={},s=[],i=0;i<e.length;i++){var d=e[i],c=o.base?d[0]+o.base:d[0],l=r[c]||0,p="".concat(c," ").concat(l);r[c]=l+1;var h=n(p),u={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==h)t[h].references++,t[h].updater(u);else{var m=a(u,o);o.byIndex=i,t.splice(i,0,{identifier:p,updater:m,references:1})}s.push(p)}return s}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var r=o(e=e||[],a=a||{});return function(e){e=e||[];for(var s=0;s<r.length;s++){var i=n(r[s]);t[i].references--}for(var d=o(e,a),c=0;c<r.length;c++){var l=n(r[c]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}r=d}}},659:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,a&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={id:o,exports:{}};return e[o](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;var o=n(72),a=n.n(o),r=n(825),s=n.n(r),i=n(659),d=n.n(i),c=n(56),l=n.n(c),p=n(540),h=n.n(p),u=n(113),m=n.n(u),g=n(208),v={};v.styleTagTransform=m(),v.setAttributes=l(),v.insert=d().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=h(),a()(g.A,v),g.A&&g.A.locals&&g.A.locals;class b{static eventHandlers={};static requestHandlers={};static pastEvents={};constructor(){}static addEventListener=(e,t)=>{b.eventHandlers[e]?b.eventHandlers[e].push(t):b.eventHandlers[e]=[t],b.pastEvents[e]&&(b.pastEvents[e].forEach((e=>{t(e)})),delete b.pastEvents[e])};static removeEventListener=(e,t)=>{b.eventHandlers[e]&&(t?(b.eventHandlers[e]=b.eventHandlers[e].filter((e=>e!==t)),0===b.eventHandlers[e]?.length&&delete b.eventHandlers[e]):delete b.eventHandlers[e])};static emitEvent=(e,t)=>{b.eventHandlers[e]?b.eventHandlers[e].forEach((e=>{e(t)})):b.pastEvents[e]?b.pastEvents[e].push(t):b.pastEvents[e]=[t]};static registerResponder=(e,t)=>{b.requestHandlers[e]?console.warn(`Request Type '${e}' already exists`):b.requestHandlers[e]=t};static unregisterResponder=e=>{delete b.requestHandlers[e]};static requestResponse=(e,t)=>new Promise((n=>{b.requestHandlers[e]?n((0,b.requestHandlers[e])(t)):(console.warn(`No responders found for Request '${e}'`),n(void 0))}))}const f=b,E=function(e){Object.keys(e).forEach((t=>{delete e[t]})),Object.setPrototypeOf(e,null)};class y{static counter=0;id;title;description;dueDate;priority;isComplete;constructor(e,t,n,o,a){this.id=y.counter++,this.title=e,this.description=t,this.dueDate=n,this.priority=o,this.isComplete=a}}class x{static instance=null;storage=null;projects={};constructor(){try{const e="__storage_test__";localStorage.setItem(e,e),localStorage.removeItem(e),this.storage=localStorage}catch(e){console.error(e)}this.storage&&(this.storage.getItem("projects")?this.getProjects():this.runDefault())}getProjects=()=>{if(this.storage)try{const e=this.storage.getItem("projects"),t=JSON.parse(e);if(t)for(const e in t)f.emitEvent("ToDoManager.addProject",e),t[e].forEach((t=>{f.emitEvent("ToDoManager.addToDo",{projectName:e,toDo:new y(t.title,t.description,new Date(t.dueDate),t.priority,t.isComplete)})}))}catch(e){this.storage.clear(),this.runDefault(),console.error(e)}};runDefault=()=>{this.projects={},f.emitEvent("ToDoManager.addProject","Test"),f.emitEvent("ToDoManager.addToDo",{projectName:"Test",toDo:new y("Test","Test",new Date,"low",!1)})};setProjects=()=>{this.storage?.setItem("projects",JSON.stringify(this.projects))};static getInstance=()=>(x.instance||(x.instance=new x),x.instance);static remove=()=>!!x.instance&&(x.instance.storage?.removeItem("projects"),E(x.instance),x.instance=null,!0);getProjectNames=()=>{const e=[];for(const t in this.projects)e.push(t);return e};getToDoListFromProject=e=>this.projects[e]?this.projects[e]:[];getAllToDos=()=>{const e=[];for(const t in this.projects)this.projects[t].forEach((t=>e.push(t)));return e};findToDo=e=>new Promise((t=>{for(const n in this.projects)t(this.projects[n].find((t=>t.id===e)))}));addProject=e=>{this.projects[e]?console.warn(`Project '${e}' already exists`):(this.projects[e]=[],this.setProjects())};removeProject=e=>{delete this.projects[e],this.setProjects()};renameProject=(e,t)=>{if(!this.projects[e])throw new ReferenceError(`Project '${e}' not defined`);{let n={};for(const o in this.projects)o===e?n[t]=this.projects[e]:n[o]=this.projects[o];this.projects=n,this.setProjects()}};addToDo=async(e,t)=>{if(!this.projects[e])throw new ReferenceError(`Project '${e}' not defined`);if(await this.findToDo(t.id))throw new Error(`A ToDo with id '${t.id}' already exists`);this.projects[e].push(t),this.setProjects()};removeToDo=e=>{for(let t in this.projects)this.projects[t]=this.projects[t].filter((t=>t.id!==e));this.setProjects()};editToDo=(e,t)=>{for(const n in this.projects){const o=this.projects[n];if(o.includes(e)){const n=o.indexOf(e);o[n]=t;break}}this.setProjects()};toggleCompletion=async e=>{const t=await this.findToDo(e);if(!t)throw new ReferenceError(`ToDo with id '${e}' doesn't exist`);!0===t.isComplete?t.isComplete=!1:t.isComplete=!0,this.setProjects()}}class C{static instance=null;projectStorage;constructor(){this.projectStorage=x.getInstance(),this.bindEvents()}bindEvents=()=>{f.registerResponder("ToDoManager.getProjectNames",this.projectStorage.getProjectNames),f.registerResponder("ToDoManager.getToDoListFromProject",this.projectStorage.getToDoListFromProject),f.registerResponder("ToDoManager.getAllToDos",this.projectStorage.getAllToDos),f.addEventListener("ToDoManager.addProject",this.addProject),f.addEventListener("ToDoManager.removeProject",this.removeProject),f.addEventListener("ToDoManager.renameProject",this.renameProject),f.addEventListener("ToDoManager.addToDo",this.addToDo),f.addEventListener("ToDoManager.removeToDo",this.removeToDo),f.addEventListener("ToDoManager.editToDo",this.editToDo),f.addEventListener("ToDoManager.toggleCompletion",this.toggleCompletion)};unbindEvents=()=>{f.unregisterResponder("ToDoManager.getProjectNames"),f.unregisterResponder("ToDoManager.getToDoListFromProject"),f.unregisterResponder("ToDoManager.getAllToDos"),f.removeEventListener("ToDoManager.addProject",this.addProject),f.removeEventListener("ToDoManager.removeProject",this.removeProject),f.removeEventListener("ToDoManager.renameProject",this.renameProject),f.removeEventListener("ToDoManager.addToDo",this.addToDo),f.removeEventListener("ToDoManager.removeToDo",this.removeToDo),f.removeEventListener("ToDoManager.editToDo",this.editToDo),f.removeEventListener("ToDoManager.toggleCompletion",this.toggleCompletion)};static getInstance=()=>(C.instance||(C.instance=new C),C.instance);static remove=()=>!!C.instance&&(C.instance.unbindEvents(),x.remove(),E(C.instance),C.instance=null,!0);addProject=e=>{this.projectStorage.addProject(e),f.emitEvent("UI.sidebar.renderProject",this.projectStorage.getProjectNames())};removeProject=e=>{this.projectStorage.removeProject(e),f.emitEvent("UI.sidebar.renderProject",this.projectStorage.getProjectNames())};renameProject=e=>{const t=e.oldProjectName,n=e.newProjectName;this.projectStorage.renameProject(t,n),f.emitEvent("UI.sidebar.renderProject",this.projectStorage.getProjectNames())};addToDo=e=>{const t=e.projectName,n=e.toDo;this.projectStorage.addToDo(t,n)};removeToDo=e=>{this.projectStorage.removeToDo(e)};editToDo=e=>{const t=e.oldToDo,n=e.newToDo;this.projectStorage.editToDo(t,n)};toggleCompletion=e=>{this.projectStorage.toggleCompletion(e)}}const j=C,D=function(e){return new Promise((t=>{document.body.style.overflowY="hidden";const{dialog:n,confirmDiv:o,ok:a,cancel:r}=function(e){const t=document.createElement("dialog");t.classList.add("dialog"),document.body.appendChild(t);const n=document.createElement("div");n.classList.add("dialog-content"),t.appendChild(n);const o=document.createElement("h2");o.classList.add("dialog-content-heading"),o.textContent="Confirm",n.appendChild(o);const a=document.createElement("p");a.classList.add("dialog-content-description"),e&&(a.textContent=e),n.appendChild(a);const r=document.createElement("div");r.classList.add("dialog-buttons"),t.appendChild(r);const s=document.createElement("button");s.classList.add("dialog-cancel-button"),s.textContent="Cancel",r.appendChild(s);const i=document.createElement("button");return i.classList.add("dialog-ok-button"),i.textContent="OK",r.appendChild(i),{dialog:t,confirmDiv:r,ok:i,cancel:s}}(e);n.style.setProperty("--backdrop-opacity","0"),n.showModal(),a.focus(),requestAnimationFrame((()=>{n.style.opacity="1",n.style.top="-32%",n.style.setProperty("--backdrop-opacity","1")}));const s=e=>{n.style.opacity="0",n.style.top="-20%",n.style.setProperty("--backdrop-opacity","0"),setTimeout((()=>{t(e),n.close(),n.remove(),document.body.style.overflowY=""}),300)};o.onclick=e=>{e.target===a?s(!0):e.target===r&&s(!1)},n.onkeydown=e=>{"Escape"===e.key&&(s(!1),e.preventDefault())}}))},T=["Today","This week","Important","All Tasks"];function P(e){const t=document.createElement("li");t.classList.add("nav-link");const n=document.createTextNode(e);return t.appendChild(n),t}function L(e,t){return new Promise((n=>{const o=document.createElement("input");o.type="text",o.maxLength=25,o.classList.add("add-project-input"),o.placeholder="Project Name",t&&(o.value=t),e.insertAdjacentElement("beforebegin",o),e.remove(),o.focus(),o.onkeydown=async a=>{if("Escape"===a.key)o.insertAdjacentElement("beforebegin",e),o.remove();else if("Enter"===a.key){const a=o.value.trim();if(t===a)o.insertAdjacentElement("beforebegin",e),o.remove();else{const t=await f.requestResponse("ToDoManager.getProjectNames",null);if(t?.includes(a)||0===a.length||T.includes(a))return;o.insertAdjacentElement("beforebegin",e),o.remove(),n(a)}}}}))}class w{static instance=null;nav;projectSideNavList;addProjectButton;constructor(e,t,n){this.nav=e,this.projectSideNavList=t,this.addProjectButton=n,this.bindEvents()}bindEvents=()=>{this.nav.addEventListener("click",this.handleNavEvent),f.addEventListener("UI.sidebar.renderProject",this.handleRenderProjects),f.addEventListener("UI.changePage",this.handlePageChange),f.addEventListener("UI.resetPage",this.handleResetPage),f.addEventListener("UI.sidebar.toggle",this.handleSideBarToggle)};unbindEvents=()=>{this.nav.removeEventListener("click",this.handleNavEvent),f.removeEventListener("UI.sidebar.renderProject",this.handleRenderProjects),f.removeEventListener("UI.changePage",this.handlePageChange),f.removeEventListener("UI.resetPage",this.handleResetPage),f.removeEventListener("UI.sidebar.toggle",this.handleSideBarToggle)};handleNavEvent=e=>{e.target instanceof HTMLElement&&(e.target.classList.contains("add-project-button")?this.handleAddEvent():e.target.classList.contains("nav-delete")?this.handleRemoveEvent(e):e.target.classList.contains("nav-edit")?this.handleEditEvent(e):e.target.classList.contains("nav-link")&&this.handlePageChangeEvent(e))};handleAddEvent=async()=>{f.emitEvent("ToDoManager.addProject",await L(this.addProjectButton))};handleRemoveEvent=async e=>{if(e.target instanceof HTMLButtonElement){const t=e.target.closest("li")?.childNodes.item(0).textContent;t&&await D("Are you sure you want to delete this project?")&&f.emitEvent("ToDoManager.removeProject",t)}};handleEditEvent=async e=>{if(e.target instanceof HTMLButtonElement){const t=e.target.closest("li"),n=t.childNodes.item(0).textContent;let o=await L(t,n);n&&o&&f.emitEvent("ToDoManager.renameProject",{oldProjectName:n,newProjectName:o})}};handlePageChangeEvent=e=>{if(e.target instanceof HTMLLIElement){const t=e.target.childNodes.item(0).textContent;t&&f.emitEvent("UI.changePage",t)}};handleRenderProjects=e=>{const t=this.projectSideNavList.querySelector(".nav-link.active")?.childNodes.item(0).textContent;this.projectSideNavList.textContent="",e.forEach((e=>{const n=P(e);t===e&&n.classList.add("active");const o=document.createElement("div");o.classList.add("nav-buttons-group"),n.appendChild(o);const a=document.createElement("button");a.classList.add("nav-edit","material-symbols-outlined"),a.textContent="edit",o.appendChild(a);const r=document.createElement("button");r.classList.add("nav-delete","material-symbols-outlined"),r.textContent="delete",o.appendChild(r),this.projectSideNavList.appendChild(n)}))};handlePageChange=e=>{const t=Array.from(this.nav.querySelectorAll(".nav-link")).find((t=>t.childNodes.item(0).textContent===e)),n=this.nav.querySelector(".active");n?.classList.remove("active"),t?.classList.add("active")};handleResetPage=()=>{const e=this.nav.querySelector(".active");e?.classList.remove("active");const t=this.nav.querySelector("li");t?.classList.add("active");const n=t?.childNodes.item(0).textContent;n&&f.emitEvent("UI.changePage",n)};handleSideBarToggle=()=>{this.nav.classList.toggle("hidden")};static getInstance=()=>{if(w.instance)return w.instance.nav;const e=document.createElement("nav");e.classList.add("sidebar");const t=document.createElement("div");t.classList.add("side"),e.appendChild(t);const n=document.createElement("h2");n.textContent="Home",t.appendChild(n);const o=document.createElement("ul");o.classList.add("nav"),t.appendChild(o),o.appendChild(P("Today")),o.appendChild(P("This week")),o.appendChild(P("Important")),o.appendChild(P("All Tasks"));const a=document.createElement("div");a.classList.add("side"),e.appendChild(a);const r=document.createElement("h2");r.textContent="Projects",a.appendChild(r);const s=document.createElement("ul");s.classList.add("nav"),a.appendChild(s);const i=document.createElement("button");return i.classList.add("add-project-button","material-symbols-outlined"),i.textContent="add",a.appendChild(i),w.instance=new w(e,s,i),f.emitEvent("UI.sidebar.toggle",null),w.instance.nav};static remove=()=>!!w.instance&&(w.instance.nav.remove(),w.instance.unbindEvents(),E(w.instance),w.instance=null,!0)}const k=w;class I{static instance=null;header;hamburger;heading;button;constructor(e,t,n,o){this.header=e,this.hamburger=t,this.heading=n,this.button=o,this.bindEvents()}bindEvents=()=>{f.registerResponder("UI.header.getCurrentPageName",this.getCurrentPageName),this.header.addEventListener("click",this.handleHeaderEvent),f.addEventListener("UI.changePage",this.handlePageChange),f.addEventListener("ToDoManager.removeProject",this.handleProjectRemoval)};unbindEvents=()=>{f.unregisterResponder("UI.header.getCurrentPageName"),this.header.removeEventListener("click",this.handleHeaderEvent),f.removeEventListener("UI.changePage",this.handlePageChange),f.removeEventListener("ToDoManager.removeProject",this.handleProjectRemoval)};getCurrentPageName=()=>this.heading.textContent;handleHeaderEvent=e=>{e.target===this.button||e.target===this.button.querySelector("span")?this.handleButtonEvent():e.target===this.hamburger&&this.handleHamburgerEvent()};handleButtonEvent=()=>{const e=this.heading.textContent;e&&f.emitEvent("UI.addToDoDialog",e)};handleHamburgerEvent=()=>{f.emitEvent("UI.sidebar.toggle",null),"menu"===this.hamburger.textContent?this.hamburger.textContent="close":this.hamburger.textContent="menu"};handlePageChange=async e=>{this.heading.textContent=e;const t=await f.requestResponse("ToDoManager.getProjectNames",null);t?.includes(e)?this.button.style.visibility="visible":this.button.style.visibility="hidden"};handleProjectRemoval=e=>{this.heading.textContent===e&&f.emitEvent("UI.resetPage",null)};static getInstance=()=>{if(I.instance)return I.instance.header;const e=document.createElement("header");e.classList.add("header");const t=document.createElement("div");t.classList.add("header-separator"),e.appendChild(t);const n=document.createElement("button");n.classList.add("hamburger","material-symbols-outlined"),n.textContent="menu",t.appendChild(n);const o=document.createElement("h2");t.appendChild(o);const a=document.createElement("button");a.classList.add("header-add-button");const r=document.createElement("span");return r.classList.add("material-symbols-outlined"),r.textContent="add",a.appendChild(r),a.appendChild(document.createTextNode("Create")),a.style.visibility="hidden",e.appendChild(a),I.instance=new I(e,n,o,a),I.instance.header};static remove=()=>!!I.instance&&(I.instance.header.remove(),I.instance.unbindEvents(),E(I.instance),I.instance=null,!0)}const M=I,S=function(e){let t="";return t+=e.getFullYear()+"-",t+=e.getMonth()<10?`0${e.getMonth()+1}-`:e.getMonth()+1+"-",t+=e.getDate(),t},N=function(e){return new Promise((t=>{document.body.style.overflowY="hidden";const{dialog:n,closeButton:o,form:a,titleInput:r,descInput:s,dateInput:i,prioritySelect:d}=function(e){const t=new Date,n=document.createElement("dialog");n.classList.add("dialog"),document.body.appendChild(n);const o=document.createElement("button");o.classList.add("dialog-close-button","material-symbols-outlined"),o.textContent="close",n.appendChild(o);const a=document.createElement("div");a.classList.add("dialog-content"),n.appendChild(a);const r=document.createElement("h2");r.classList.add("dialog-content-heading"),r.textContent="Create To Do",a.appendChild(r);const s=document.createElement("form");s.method="dialog",s.classList.add("dialog-todo-form"),a.appendChild(s);const i=document.createElement("div");i.classList.add("todo-form-container"),s.appendChild(i);const d=document.createElement("div");d.classList.add("todo-form-field"),i.appendChild(d);const c=document.createElement("label");c.htmlFor="todo-title",c.textContent="Title: ",d.appendChild(c);const l=document.createElement("input");l.type="text",l.name="title",l.id="todo-title",l.maxLength=30,l.autofocus=!0,l.required=!0,d.appendChild(l);const p=document.createElement("div");p.classList.add("todo-form-field"),i.appendChild(p);const h=document.createElement("label");h.htmlFor="todo-desc",h.textContent="Description: ",p.appendChild(h);const u=document.createElement("textarea");u.name="desc",u.id="todo-desc",u.maxLength=300,u.required=!0,p.appendChild(u);const m=document.createElement("div");m.classList.add("todo-form-field"),i.appendChild(m);const g=document.createElement("label");g.htmlFor="todo-date",g.textContent="Date: ",m.appendChild(g);const v=document.createElement("input");v.type="date",v.name="dueDate",v.id="todo-date",v.min=S(t),v.valueAsDate=t,v.required=!0,m.appendChild(v);const b=document.createElement("div");b.classList.add("todo-form-field"),i.appendChild(b);const f=document.createElement("label");f.htmlFor="todo-priority",f.textContent="Priority: ",b.appendChild(f);const E=document.createElement("select");E.name="priority",E.id="todo-priority",E.required=!0,b.appendChild(E);const y=document.createElement("option");y.value="low",y.textContent="Low",E.appendChild(y);const x=document.createElement("option");x.value="medium",x.textContent="Medium",E.appendChild(x);const C=document.createElement("option");C.value="high",C.textContent="High",E.appendChild(C);const j=document.createElement("button");return j.classList.add("todo-submit"),j.textContent="Submit",i.appendChild(j),e&&(l.value=e.title,u.value=e.description,v.valueAsDate=e.dueDate,E.selectedIndex=Array.from(E.options).findIndex((t=>t.value===e.priority)),v.min=S(e.dueDate)),{dialog:n,closeButton:o,form:s,titleInput:l,descInput:u,dateInput:v,prioritySelect:E}}(e);n.style.setProperty("--backdrop-opacity","0"),n.showModal(),requestAnimationFrame((()=>{n.style.opacity="1",n.style.top="-15%",n.style.setProperty("--backdrop-opacity","1")}));const c=e=>{n.style.opacity="0",n.style.top="0%",n.style.setProperty("--backdrop-opacity","0"),setTimeout((()=>{t(e),n.close(),n.remove(),document.body.style.overflowY=""}),300)};n.onkeydown=e=>{"Escape"===e.key&&(c(),e.preventDefault())},o.onclick=()=>{c()},a.onsubmit=t=>{const n=r.value,o=s.value,a=i.valueAsDate?i.valueAsDate:"";let l=d.selectedOptions.item(0)?.value;const p=l||"low",h=new y(n,o,new Date(a),p,!!e?.isComplete);c(h),t.preventDefault()}}))},A=function(e){const t=document.createElement("div");t.classList.add("todo",e.priority);const n=document.createElement("div");n.classList.add("todo-head"),t.appendChild(n);const o=document.createElement("span");o.classList.add("check","material-symbols-outlined"),o.textContent="radio_button_unchecked",o.onclick=async()=>{f.emitEvent("ToDoManager.toggleCompletion",e.id);const t=await f.requestResponse("UI.header.getCurrentPageName",null);t&&f.emitEvent("UI.changePage",t)},n.appendChild(o);const a=document.createElement("div");n.appendChild(a);const r=document.createElement("h3");r.textContent=e.title,a.appendChild(r);const s=document.createElement("p");s.textContent=e.description,a.appendChild(s),e.isComplete&&(r.style.textDecoration="line-through",s.style.textDecoration="line-through",o.style.fontVariationSettings="'FILL' 1",o.textContent="check_circle");const i=new Date(S(new Date));if(e.dueDate.getSeconds()<i.getSeconds()){const e=document.createElement("span");e.textContent="OVERDUE!",e.style.color="red",e.style.border="1px solid",e.style.padding="0px 4px",n.appendChild(e)}const d=document.createElement("div");d.classList.add("todo-tail"),t.appendChild(d);const c=document.createElement("span");c.classList.add("todo-date"),c.textContent=e.dueDate.toLocaleDateString(),d.appendChild(c);const l=document.createElement("button");l.classList.add("todo-edit","material-symbols-outlined"),l.textContent="edit",l.onclick=async()=>{const t=await N(e);if(t){f.emitEvent("ToDoManager.editToDo",{oldToDo:e,newToDo:t});const n=await f.requestResponse("UI.header.getCurrentPageName",null);n&&f.emitEvent("UI.changePage",n)}},d.appendChild(l);const p=document.createElement("button");return p.classList.add("todo-delete","material-symbols-outlined"),p.textContent="delete",p.onclick=async()=>{if(await D("Are you sure you want to delete this To Do?")){f.emitEvent("ToDoManager.removeToDo",e.id);const t=await f.requestResponse("UI.header.getCurrentPageName",null);t&&f.emitEvent("UI.changePage",t)}},d.appendChild(p),t},R=async function(e){const t=document.createElement("main");t.classList.add("main");const n=new Date(S(new Date)),o=new Date(n.getTime()+864e5);if("Today"===e){const e=await f.requestResponse("ToDoManager.getAllToDos",null),r=[];e&&e.forEach((e=>{const t=e.dueDate.getTime();t>=n.getTime()&&t<o.getTime()&&r.push(e)})),t.appendChild(a(r))}else if("This week"===e){const e=6048e5,r=new Date(n.getTime()+e),s=await f.requestResponse("ToDoManager.getAllToDos",null),i=[];s&&s.forEach((e=>{const t=e.dueDate.getTime();t>=o.getTime()&&t<r.getTime()&&i.push(e)})),t.appendChild(a(i))}else if("Important"===e){const e=await f.requestResponse("ToDoManager.getAllToDos",null),n=[];e&&e.forEach((e=>{"high"===e.priority&&n.push(e)})),t.appendChild(a(n))}else if("All Tasks"===e){const e=await f.requestResponse("ToDoManager.getAllToDos",null),n=[];e&&e.forEach((e=>{n.push(e)})),t.appendChild(a(n))}else{const n=await f.requestResponse("ToDoManager.getToDoListFromProject",e);n&&t.appendChild(a(n))}function a(e){const n=document.createElement("div");n.classList.add("todo-container"),t.appendChild(n);const o=[];return e.forEach((e=>{e.isComplete?o.push(e):n.appendChild(A(e))})),o.forEach((e=>{n.appendChild(A(e))})),n}return t};class U{static instance=null;container;activePage;constructor(e,t){this.container=e,this.activePage=t,this.bindEvents(),f.emitEvent("UI.changePage","Today")}bindEvents=()=>{f.addEventListener("UI.changePage",this.handlePageChange),f.addEventListener("UI.sidebar.toggle",this.handleSideBarToggle),f.addEventListener("UI.addToDoDialog",this.handleAddToDoDialog)};unbindEvents=()=>{f.removeEventListener("UI.sidebar.toggle",this.handleSideBarToggle),f.removeEventListener("UI.addToDoDialog",this.handleAddToDoDialog),f.removeEventListener("UI.changePage",this.handlePageChange)};handleAddToDoDialog=async e=>{const t=await N();t&&(f.emitEvent("ToDoManager.addToDo",{projectName:e,toDo:t}),f.emitEvent("UI.changePage",e))};handleSideBarToggle=()=>{k.getInstance().classList.contains("hidden")?this.container.classList.add("sidebar-hidden"):this.container.classList.remove("sidebar-hidden")};handlePageChange=async e=>{this.activePage.remove(),this.activePage=await R(e),this.container.appendChild(this.activePage)};static run=async()=>{if(U.instance)return;j.getInstance();const e=document.createElement("div");e.classList.add("container","sidebar-hidden"),document.body.appendChild(e),e.appendChild(M.getInstance()),e.appendChild(k.getInstance());const t=await R("Today");e.appendChild(t);const n=document.createElement("button");n.classList.add("reset-button"),n.textContent="Reset & Reload",n.onclick=()=>U.close(),e.appendChild(n),U.instance=new U(e,t)};static close=()=>{U.instance&&(U.instance.unbindEvents(),M.remove(),k.remove(),j.remove(),E(U.instance),U.instance=null,location.reload())}}U.run()})();